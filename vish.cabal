-- Initial vish.cabal generated by cabal init.  For further
-- documentation, see http://haskell.org/cabal/users-guide/

name:                vish
version:             0.1.0.0
-- synopsis:
-- description:
license:             BSD3
license-file:        LICENSE
author:              Gabriel Anderson
maintainer:          ganderson@go.shoreline.edu
copyright:           Copyight (C) 2015 Gabriel Anderson
category:            Text
build-type:          Simple
-- extra-source-files:
cabal-version:       >=1.18

data-dir:            data

source-repository     head
  type:               git
  location:           https://www.github.com:andgate/vish.git

Flag GLUT
  Description: Enable the GLUT backend
  Default:     True

Flag GLFW
  Description: Enable the GLFW backend
  Default:     False

library
  default-language:   Haskell2010

  build-depends:      base < 5 && >= 4
                      , text >= 1.2 && < 1.3
                      , attoparsec >= 0.1 && < 1
                      , hashtables >= 1.1 && < 2
                      , free >= 4 && < 5
                      , OpenGL (==2.12.*)
                      , JuicyPixels >= 3 && < 4
                      , vector >= 0.10 && < 1
                      , containers >= 0.5 && < 1
                      , directory >= 1.2 && < 1.3
                      , filepath >= 1.4 && < 1.5
                      , safe >= 0.3 && < 0.4
                      , regex-tdfa >= 1.2 && < 2
                      , lens >= 4.0 && < 5
                      , pretty >= 1.1 && < 1.2
                      , transformers >= 0.4 && < 0.5
                      , hashable >= 1.2.3.3 && < 2
                      , yaml >= 0.8 && < 1
                      , unordered-containers >= 0.2 && < 0.3
                      , ListZipper == 1.2.0.2
                      , bifunctors == 5

  default-extensions: OverloadedStrings
                      , UnicodeSyntax
                      , PostfixOperators
                      , TupleSections
                      , PackageImports
                      , RecursiveDo
                      , LambdaCase
                      , MultiWayIf
                      , TemplateHaskell

  ghc-options:        -Wall
                      -fwarn-tabs
                      -fno-warn-unused-binds
                      -fno-warn-unused-do-bind
                      -fno-warn-unused-imports
                      -fno-warn-type-defaults

  hs-source-dirs:     src

  exposed-modules:    Vish.Game
                      Vish.Util
                      Vish.Script
                      Vish.Interpreter
                      Vish.Application.Data.App
                      Vish.Application.App
                      Vish.Application.AppConfig
                      Vish.Application.Graphics
                      Vish.Application.Data.Window
                      Vish.Application.Window
                      Vish.Application.Data.Input
                      Vish.Application.Input
                      Vish.Graphics.Picture
                      Vish.Graphics.Data.Picture
                      Vish.Graphics.Texture
                      Vish.Graphics.Data.Texture
                      Vish.Graphics.Util

                      Vish.Application.Data.IORef.Lens

  Other-modules:      Vish.Application.Internal.App
                      Vish.Application.Internal.Backend
                      Vish.Application.Internal.Backend.Types
                      Vish.Application.Internal.Data.Input
                      Vish.Application.Internal.Input
                      Vish.Application.Data.AppConfig

  If flag(GLUT)
    Build-Depends:    GLUT (==2.7.*)
    CPP-Options:      -DWITHGLUT
    Other-modules:    Vish.Application.Internal.Backend.GLUT

  If flag(GLFW)
    Build-Depends:    GLFW-b >= 1.4 && < 2
    CPP-Options:      -DWITHGLFW
    Other-modules:    Vish.Application.Internal.Backend.GLFW


executable TestGame
  main-is:            TestGame.hs
  default-language:   Haskell2010
  default-extensions: OverloadedStrings
                      , UnicodeSyntax
                      , PostfixOperators
                      , TupleSections
                      , PackageImports
                      , RecursiveDo
                      , LambdaCase
                      , MultiWayIf
                      , TemplateHaskell

  build-depends:      base < 5
                      , vish

  ghc-options:        -Wall
                      -fwarn-tabs
                      -fno-warn-unused-binds
                      -fno-warn-unused-do-bind
                      -fno-warn-unused-imports
                      -fno-warn-type-defaults
